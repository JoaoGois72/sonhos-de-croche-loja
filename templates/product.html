{% extends "base.html" %}{% block content %}
<style>
  .pwrap{display:grid;grid-template-columns:1.2fr .8fr;gap:18px}
  .panel{background:#fff;border:1px solid rgba(0,0,0,.08);border-radius:16px;box-shadow:0 10px 24px rgba(0,0,0,.06);overflow:hidden}
  .gallery{padding:12px}
  .mainimg{height:360px;border-radius:14px;overflow:hidden;background:#fff3e0}
  .mainimg img{width:100%;height:100%;object-fit:cover}
  .thumbs{display:flex;gap:10px;overflow:auto;padding:10px 0 0}
  .thumbs img{width:90px;height:70px;object-fit:cover;border-radius:12px;border:1px solid rgba(0,0,0,.08);cursor:pointer}
  .info{padding:16px}
  .price{font-size:22px;font-weight:900;margin:14px 0}
  .btn{border:none;border-radius:999px;background:#ffcc33;padding:12px 14px;font-weight:900;cursor:pointer;width:100%}
  .muted{color:#6b6b6b;font-size:12px}
  @media (max-width:900px){.pwrap{grid-template-columns:1fr}.mainimg{height:280px}}
</style>

<div class="pwrap">
  <div class="panel">
    <div class="gallery">
      <div class="mainimg">
        {% if images and images|length > 0 %}
          <img id="mainPhoto" src="{{ images[0].image_url }}" alt="{{ product.name }}">
        {% else %}
          <img id="mainPhoto" src="{{ url_for('static', filename='brand/placeholder.jpg') }}" alt="{{ product.name }}">
        {% endif %}
      </div>
      {% if images and images|length > 1 %}
      <div class="thumbs">
        {% for img in images %}
          <img src="{{ img.image_url }}" alt="Foto {{ loop.index }}" onclick="document.getElementById('mainPhoto').src=this.src">
        {% endfor %}
      </div>
      {% endif %}
    </div>
  </div>

  <div class="panel">
    <div class="info">
      <h2 style="margin:0 0 8px">{{ product.name }}</h2>
      <p style="margin:0;color:#6b6b6b">{{ product.description }}</p>
      <div class="price">{{ money_br(product.price) }}</div>
      <form action="{{ url_for('cart_add', product_id=product.id) }}" method="post">
        <label class="muted">Quantidade</label>
        <input name="qty" type="number" value="1" min="1" max="99" style="width:100%;padding:10px;border-radius:12px;border:1px solid rgba(0,0,0,.12);margin:8px 0 12px;">
        <button class="btn" type="submit">Adicionar ao carrinho</button>
      </form>
      <div style="margin-top:12px"><a class="muted" href="{{ url_for('cart_view') }}">â†’ Ver carrinho</a></div>
    </div>
  </div>
</div>
{% endblock %}
