{% extends "base.html" %}
{% block hero %}
<div class="hero">
<div class="hero-banner">
    <img src="{{ url_for('static', filename='img/banner.jpg') }}" alt="Sonhos de Croch√™">
</div>

  
  <div class="hero-inner">
    <h1>Sonhos de Croch√™ üß∂</h1>
    <p>Bolsas artesanais premium com acabamento impec√°vel. Escolha sua favorita e finalize com seguran√ßa.</p>
    <div class="hero-cta">
      <a class="btn primary" href="#catalogo">Ver cat√°logo</a>
      <a class="btn ghost" href="{{ url_for('cart_view') }}">Ir para carrinho</a>
    </div>
  </div>
</div>
{% endblock %}

{% block content %}
<h2 id="catalogo" style="margin-top:18px;">Cat√°logo</h2>
<p class="muted">Produtos dispon√≠veis ‚Ä¢ Pronta entrega e encomenda.</p>

<div class="grid products">
  {% for p in products %}
  <div class="card">
    <a class="media" href="{{ url_for('product_detail', product_id=p.id) }}">
      {% if p.images and p.images|length > 0 %}
        <img src="{{ p.images[0].image_url }}" alt="{{ p.name }}">
      {% else %}
        <img src="{{ p.image_url or url_for('static', filename='img/placeholder.jpg') }}" alt="{{ p.name }}">
      {% endif %}
    </a>
    <div class="card-pad">
      <div class="h3">{{ p.name }}</div>
      <div class="muted">{{ (p.description[:86] ~ '‚Ä¶') if p.description and p.description|length > 86 else (p.description or '') }}</div>

      <div class="price">R$ {{ "%.2f"|format(p.price) }}</div>

      {% if pix_discount_percent() > 0 %}
        {% set pix_price = price_with_pix_discount(p.price) %}
        {% set eco = (p.price - pix_price) %}
        <div class="pix">
          <div class="line1">üí∞ {{ pix_discount_percent() }}% OFF no Pix</div>
          <div class="line2">Economia: R$ {{ "%.2f"|format(eco) }} ‚Ä¢ Pix: R$ {{ "%.2f"|format(pix_price) }}</div>
        </div>
      {% endif %}

      <a class="btn primary block" style="margin-top:12px" href="{{ url_for('product_detail', product_id=p.id) }}">Ver produto</a>
    </div>
  </div>
  {% endfor %}
</div>
{% endblock %}
